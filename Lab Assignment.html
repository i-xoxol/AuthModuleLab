
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Development Lab (CY-410)</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        details {
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        summary {
            font-weight: bold;
            cursor: pointer;
            padding: 10px;
            background-color: #f4f4f4;
        }
        .code-snippet {
            background-color: #eee;
            padding: 10px;
            border-radius: 5px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Secure Development Lab (CY-410)</h1>
        <h2>Software and System Security - Sacred Heart University, Fairfield, CT</h2>

        <div style="text-align: left;">
            <h2>Introduction</h2>
            <p>
                Welcome to the Secure Development Lab! This lab is designed to provide you with hands-on experience in building a secure authentication module from scratch. You will learn how to implement secure coding practices and how to use unit tests to verify the security and functionality of your code.
            </p>

            <h2>Learning Objectives</h2>
            <ul>
                <li>Understand the core principles of secure software development.</li>
                <li>Learn how to design and implement a secure authentication module.</li>
                <li>Appreciate the role of unit tests in identifying and mitigating security risks.</li>
                <li>Apply the concepts of the CIA triad (Confidentiality, Integrity, Availability) to a real-world application.</li>
            </ul>

            <h2>Lab Overview</h2>
            <p>
                In this lab, you will be working with a set of Python files that form the skeleton of an authentication module. Your task is to complete the missing code in these files and to write unit tests to verify your implementation. The lab is divided into several steps, and for each step, you will be provided with instructions and a code snippet (initially hidden) to guide you.
            </p>

            <h2>Step 1: Implement the Hashing Function</h2>
            <p>
                The first step is to implement the `get_hash` function in `auth.py`. This function is responsible for hashing passwords using the SHA-256 algorithm. Hashing is a one-way function that converts a password into a fixed-size string of characters. It is a crucial security measure for protecting user passwords.
            </p>
            <details>
                <summary>Click for instructions and code snippet</summary>
                <p>Open the `auth.py` file and complete the `get_hash` function. You will need to use the `hashlib` module to create a SHA-256 hash of the input string.</p>
                <div class="code-snippet">
                    <code>
# auth.py

def get_hash(input_string):
    return hashlib.sha256(input_string.encode()).hexdigest()
                    </code>
                </div>
            </details>

            <h2>Step 2: Implement the User Search Function</h2>
            <p>
                Next, you will implement the `find_user` function in `auth.py`. This function is used to find a user in a list of users by their username.
            </p>
            <details>
                <summary>Click for instructions and code snippet</summary>
                <p>Open the `auth.py` file and complete the `find_user` function. You will need to iterate through the list of users and return the user object that matches the given username (case-insensitive).</p>
                <div class="code-snippet">
                    <code>
# auth.py

def find_user(user_list, username):
    for user in user_list:
        if user.username.lower() == username.lower():
            return user
    return None
                    </code>
                </div>
            </details>

            <h2>Step 3: Implement the User Creation Function</h2>
            <p>
                Now, you will implement the `create_user` function in `user_registration.py`. This function is responsible for creating a new `User` object with a hashed password and a salt.
            </p>
            <details>
                <summary>Click for instructions and code snippet</summary>
                <p>Open the `user_registration.py` file and complete the `create_user` function. You will need to use the `get_salt` and `get_hash` functions from the `auth` module to create a new user.</p>
                <div class="code-snippet">
                    <code>
# user_registration.py

def create_user(username, password):
    salt = bytes_to_hex(get_salt(32))
    pass_salt = password + salt
    hashed_pass = get_hash(pass_salt)
    return User(username, hashed_pass, salt)
                    </code>
                </div>
            </details>

            <h2>Step 4: Write Unit Tests</h2>
            <p>
                The final step is to write unit tests for the functions you have implemented. Unit tests are essential for verifying the correctness and security of your code. They help to ensure that your code behaves as expected and that it is resilient to errors and attacks.
            </p>
            <details>
                <summary>Click for instructions and code snippets</summary>
                <p>Open the `test_auth.py` and `test_user_registration.py` files and complete the missing tests. You will need to write tests for the `get_hash`, `find_user`, and `create_user` functions.</p>
                <div class="code-snippet">
                    <code>
# test_auth.py

# ... (existing tests)

    def test_get_hash(self):
        test_string = "TEST"
        test_hash = "94ee059335e587e501cc4bf90613e0814f00a7b08bc7c648fd865a2af6a22cc2"
        hash_result = get_hash(test_string)
        self.assertEqual(hash_result, test_hash)

    def test_find_user(self):
        users = [
            User("user1", "pass1", "salt1"),
            User("user2", "pass2", "salt2"),
            User("user3", "pass3", "salt3"),
        ]
        found_user = find_user(users, "user2")
        self.assertIsNotNone(found_user)
        self.assertEqual(found_user.username, "user2")
        not_found_user = find_user(users, "user4")
        self.assertIsNone(not_found_user)

# ... (existing tests)
                    </code>
                </div>
                <div class="code-snippet">
                    <code>
# test_user_registration.py

# ... (existing tests)

    def test_create_user(self):
        user = create_user("testuser", "testpassword")
        self.assertEqual(user.username, "testuser")
        self.assertIsNotNone(user.hpass)
        self.assertIsNotNone(user.salt)

# ... (existing tests)
                    </code>
                </div>
            </details>

            <h2>Running the Tests</h2>
            <p>
                Once you have implemented all the functions and the unit tests, you can run the tests to verify your implementation. Open your terminal, navigate to the `AuthLab_student` directory, and run the following command:
            </p>
            <div class="code-snippet">
                <code>
python -m unittest discover
                </code>
            </div>

            <h2>Conclusion</h2>
            <p>
                Congratulations on completing the Secure Development Lab! You have learned how to build a secure authentication module, how to use unit tests to verify your code, and how to apply the principles of the CIA triad to a real-world application.
            </p>
        </div>
    </div>
</body>
</html>
